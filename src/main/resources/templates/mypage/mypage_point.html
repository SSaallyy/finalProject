<!DOCTYPE html>
<html th:replace="~{layout/layoutFile :: layout(~{::section})}"
      xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
</head>
<body>

<div class="preloader" style="display: none;">
  <div class="d-table">
    <div class="d-table-cell">
      <div class="lds-spinner">
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
      </div>
    </div>
  </div>
</div>


<!-- Common Banner Area -->
<section id="common_banner">
  <div class="container">
    <div class="row">
      <div class="col-lg-12">
        <div class="common_bannner_text">
          <h2>내 포인트</h2>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Dashboard Area -->
<section id="dashboard_main_arae" class="section_padding">
  <div class="container">
    <div class="row">
      <div class="col-lg-4-sally">
        <div class="dashboard_sidebar">
            <div class="dashboard_sidebar_user">
                           
                            <h2>마이페이지</h2>
                           
                        </div>

          <div class="dashboard_menu_area">
              <ul>

                  <li class="dashboard_dropdown_button" id="dashboard_dropdowns"><b>My profile</b>
                      <span> </span>
                      <div class="booing_sidebar_dashboard" id="show_dropdown_item"
                           style="">
                          <ul>
                              <li><a th:href="@{/mypage/pwdUpdate}">비밀번호 수정</a></li>
                              <li><a th:href="@{/mypage/update}">내 정보 수정</a></li>
                              <li><a th:href="@{/mypage/unregister}">회원 탈퇴</a></li>
                          </ul>
                      </div>

                  </li>
                  <li class="dashboard_dropdown_button" id="dashboard_dropdowns"><b>예약현황</b>
                      <span> </span>
                      <div class="booing_sidebar_dashboard" id="show_dropdown_item"
                           style="">
                          <ul>
                              <li><a th:href="@{/mypage/bookingList}">예약내역</a></li>
                              <li><a th:href="@{/mypage/cancelList}">취소내역</a></li>
                          </ul>
                      </div>

                  </li>
                  <li class="dashboard_dropdown_button" id="dashboard_dropdowns"><b>문의내역</b>
                      <span> </span>
                      <div class="booing_sidebar_dashboard" id="show_dropdown_item"
                           style="">
                          <ul>
                              <li><a th:href="@{/mypage/qna}">QnA</a></li>
                              <li><a th:href="@{/mypage/voicecusList}">고객의 소리</a></li>
                              <li><a th:href="@{/mypage/estimateList}">여행 견적문의</a></li>
                          </ul>
                      </div>

                  </li>
                  <li><a th:href="@{/mypage/reviewList}"><b>나의 여행후기</b></a></li>
                  <li><a th:href="@{/mypage/point}" class="active"><b>포인트</b></a></li>
                  <li><a th:href="@{/mypage/coupon}"><b>할인쿠폰</b></a></li>


              </ul>
          </div>
        </div>
      </div>
      <div class="col-lg-8-sally">
          <div class="section_heading_center">
                            <h2>내 포인트</h2>
                        </div>
          <div class="col-lg-12" >
                    
                        <div class="row-jungmin" >
                            
                              <div class="col-lg-5 col-md-6 clo-sm-12 col-12" align="center">
                                <br/><br/><br/><br/>
                                  <p><span style="font-size: 70px; color: black" th:text="${member.name}">정민</span><span style="font-size:40px; color: black">님의</span></p><br/>
                                  <p><span style="font-size:35px; color: black">사용가능 포인트</span></p><br/>
                                  <p><span style="font-size:60px; color: #99E000" th:text="${member.point}">500P</span></p>
                            </div>
                            
                            <div class="col-lg-2 col-md-6 clo-sm-12 col-12">
                                <div class="top_service_boxed">
                                <span style="font-size: 50px" th:text="${savedPoint1+payPoint}">500</span><h2>p</h2>
                                <h3>총 적립 <br/>포인트</h3>
                            </div>
                            </div>
                            <div class="col-lg-2 col-md-6 clo-sm-12 col-12">
                                <div class="top_service_boxed">
                                 <span style="font-size: 50px" th:text="${sum1}">0</span><h2>p</h2>
                                <h3>사용한<br/> 포인트</h3>

                             </div>
                            </div>
                            <div class="col-lg-2 col-md-6 clo-sm-12 col-12">
                                <div class="top_service_boxed">
                                    <span style="font-size: 50px" th:text="${expiredPoint + expiredPayedPoint}">50</span><h2>p</h2>

                                    <h3>소멸예정<br/> 포인트</h3>
                       
                                    </div>
                            </div>
                          
                            
                        </div>
              <br/>
              <div align="right">
                  <h6>*3개월 이내 소멸예정</h6>
              </div>
                    
                </div>
          <br/><br/><br/>
                <div class="dashboard_common_table">
          <h3>적립 포인트</h3>
          <div class="table-responsive-lg table_common_area">
           <table class="table">
              <thead>
              <tr>
                <th width="300">일자</th>
                <th width="650">상세내용</th>
                <th width="200">적립포인트</th>
                <th width="200">유효기간</th>
                


              </tr>
              </thead>
              <tbody>
              <tr th:if="${savedPoint.isEmpty() and mypagePay.isEmpty()}"><td th:colspan="4">적립된 포인트가 없습니다.</td></tr>
              <tr th:each="savedPoint : ${savedPoint}">
                  <td th:text="${#temporals.format(savedPoint.created,'yyyy-MM-dd')}">2022-09-01</td>
                  <td align="center"><a th:href="@{|/notice/article/${savedPoint.notice.id}|}">공지사항 댓글작성</a></td>
                  <td>500</td>
                  <td th:text="${#temporals.format(savedPoint.created.plusYears(1),'yyyy-MM-dd')}">2022-09-01</td>
              </tr>
              <tr th:each="mypagePay : ${mypagePay}">
                  <td th:text="${#temporals.format(mypagePay.payDate,'yyyy-MM-dd')}">2022-01-01</td>
                  <td align="center">구매적립금(5%)</td>
                  <td th:text="${(mypagePay.payTotalPrice)*0.05}"></td>
                  <td th:text="${#temporals.format(mypagePay.payDate.plusYears(1),'yyyy-MM-dd')}">30</td>

              </tr>

              </tbody>
            </table>
          </div>
         
          </div>
          <br/><br/><br/>
          
          <div class="dashboard_common_table">
          <h3>사용 포인트</h3>
          <div class="table-responsive-lg table_common_area">
            <table class="table">
              <thead>
              <tr>
                <th width="300">일자</th>
                <th width="650">상세내용</th>
                  <th width="300">구매 패키지</th>
                <th width="200">사용포인트</th>
                
                


              </tr>
              </thead>
              <tbody>
              <tr th:if="${mypagePay.isEmpty()}"><td th:colspan="4">사용하신 포인트가 없습니다</td></tr>
              <tr th:each="mypagePay : ${mypagePay}" th:unless="${mypagePay.usedPoint==0}">
                <td th:text="${#temporals.format(mypagePay.payDate,'yyyy-MM-dd')}">2022-01-01</td>
                <td align="center">결제단계에서 사용</td>
                  <td th:text="${mypagePay.userBooking.apackage.packageName}"></td>
                <td th:text="${mypagePay.usedPoint}">300</td>
                

              </tr>
                  
             
              </tbody>
            </table>
          </div>
         
          </div>
          
       
      </div>
    </div>
  </div>
</section>

</body></html>